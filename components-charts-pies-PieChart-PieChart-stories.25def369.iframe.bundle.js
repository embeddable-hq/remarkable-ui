"use strict";(self.webpackChunk_embeddable_com_remarkable_ui=self.webpackChunk_embeddable_com_remarkable_ui||[]).push([[59],{"./src/components/charts/pies/PieChart/PieChart.stories.tsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Resize:()=>Resize,__namedExportsOrder:()=>__namedExportsOrder,default:()=>PieChart_stories});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-chartjs-2/dist/index.js"),chart=__webpack_require__("./node_modules/chart.js/dist/chart.js"),pies_utils=__webpack_require__("./src/components/charts/pies/pies.utils.ts"),chartjs_plugin_datalabels_esm=__webpack_require__("./node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.esm.js"),chartjs_utils=__webpack_require__("./src/components/charts/chartjs.utils.ts"),mergician_esm=__webpack_require__("./node_modules/mergician/dist/mergician.esm.js"),charts_module=__webpack_require__("./src/components/charts/charts.module.css"),chartjs_plugin_annotation_esm=__webpack_require__("./node_modules/chartjs-plugin-annotation/dist/chartjs-plugin-annotation.esm.js");chart.t1.register(chart.Bs,chart.m_,chart.s$,chartjs_plugin_datalabels_esm.A,chartjs_plugin_annotation_esm.A);const PieChart=({data,options={},onSegmentClick,showLegend=!0,showTooltips=!0,showValueLabels=!0})=>{const chartRef=(0,react.useRef)(null),pieOptions=(0,mergician_esm.i)((0,pies_utils.BY)({showLegend,showTooltips,showValueLabels}),options);return(0,jsx_runtime.jsx)("div",{className:charts_module.A.chartContainer,children:(0,jsx_runtime.jsx)(dist.Fq,{ref:chartRef,data:(0,pies_utils.Jo)(data),options:pieOptions,onClick:event=>{const indexClicked=(0,chartjs_utils.x)(event,chartRef);onSegmentClick?.(indexClicked)}})})};PieChart.__docgenInfo={description:"",methods:[],displayName:"PieChart",props:{data:{required:!0,tsType:{name:"ChartData",elements:[{name:"literal",value:"'pie'"}],raw:"ChartData<'pie'>"},description:""},options:{required:!1,tsType:{name:"Partial",elements:[{name:"ChartOptions",elements:[{name:"literal",value:"'pie'"}],raw:"ChartOptions<'pie'>"}],raw:"Partial<ChartOptions<'pie'>>"},description:"",defaultValue:{value:"{}",computed:!1}},onSegmentClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(index: number | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},name:"index"}],return:{name:"void"}}},description:""},showLegend:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showTooltips:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showValueLabels:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};var pies_mock=__webpack_require__("./src/components/charts/pies/pies.mock.ts"),storybook_constants=__webpack_require__("./src/storybook.constants.tsx");const PieChart_stories={title:"Charts/PieChart",component:PieChart,args:{data:pies_mock.X}},Default={decorators:storybook_constants.uk},Resize={decorators:storybook_constants.TL},__namedExportsOrder=["Default","Resize"]},"./src/components/charts/pies/pies.mock.ts"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{X:()=>pieDataMock});const pieDataMock={labels:["Orange 1","Orange 2","Orange 3","Orange 4","Orange 5","Orange 6"],datasets:[{data:[12,19,3,5,2,3]}]}},"./src/components/charts/pies/pies.utils.ts"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{BY:()=>getPieChartOptions,Jo:()=>getPieChartData,Nj:()=>getDonutChartOptions});var mergician__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/mergician/dist/mergician.esm.js"),_charts_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/charts/charts.constants.ts"),_chartjs_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/charts/chartjs.constants.ts"),_styles_styles_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/styles/styles.utils.ts");const getPieChartData=data=>{const chartColors=(0,_charts_constants__WEBPACK_IMPORTED_MODULE_1__.p)();return{...data,datasets:data.datasets?.map(dataset=>{const colors=dataset.data.map((_value,index)=>chartColors[index%chartColors.length]),defaultDataset={backgroundColor:colors,borderColor:colors};return(0,mergician__WEBPACK_IMPORTED_MODULE_0__.i)(defaultDataset,dataset)})||[]}},getPieChartOptions=options=>{const pieChartOptions={plugins:{legend:{display:options.showLegend},datalabels:{display:!!options.showValueLabels&&"auto"},tooltip:{enabled:options.showTooltips}}};return(0,mergician__WEBPACK_IMPORTED_MODULE_0__.i)((0,_chartjs_constants__WEBPACK_IMPORTED_MODULE_2__.a8)(),pieChartOptions)},getDonutChartOptions=options=>{const donutChartOptions={cutout:"60%",elements:{arc:{borderWidth:1}},plugins:{annotation:{annotations:{innerlabel:{content:[options.label,options.subLabel].filter(Boolean),type:"doughnutLabel",font:[{size:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_3__.F)("--em-piechart-donut-number-line-height","2.375rem"),weight:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_3__.F)("--em-piechart-donut-number-font-weight","700"),height:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_3__.F)("--em-piechart-donut-number-line-height","2.375rem"),family:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_3__.g)("--em-piechart-font-family","sans-serif")},{size:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_3__.F)("--em-piechart-donut-label-font-size","1rem"),weight:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_3__.F)("--em-piechart-donut-label-font-weight","500"),height:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_3__.F)("--em-piechart-donut-label-line-height","1rem"),family:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_3__.g)("--em-piechart-font-family","sans-serif")}],color:[(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_3__.g)("--em-piechart-donut-color","#212129")]}}}}};return(0,mergician__WEBPACK_IMPORTED_MODULE_0__.i)(getPieChartOptions(options),donutChartOptions)}}}]);