"use strict";(self.webpackChunk_embeddable_com_remarkable_ui=self.webpackChunk_embeddable_com_remarkable_ui||[]).push([[4876],{"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./src/remarkable-ui/charts/tables/HeatMap/HeatMap.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".WDdK6TNJAIz1aSQThgXB {\n  width: 100%;\n  height: 100%;\n}\n\n.dUTpN_rou4ymw_Q8O3jC {\n  background: var(--em-table-background-color-default-header, #fff);\n  width: fit-content;\n\n  max-width: 100%;\n  height: fit-content;\n  max-height: 100%;\n\n  border: var(--em-table-border-width-default, 1px) solid\n    var(--em-table-border-color-default, #ededf1);\n  border-radius: var(--em-table-border-radius-default, 0.75rem);\n  overflow-x: auto;\n  overflow-y: auto;\n  position: relative;\n  box-sizing: border-box;\n\n  &.R4wY06Uwx1nEzEfOsaNu {\n    width: 100%;\n\n    .f3SJtNu26eoSCxXcZBrq {\n      width: 100%;\n    }\n  }\n}\n\n.f3SJtNu26eoSCxXcZBrq {\n  border-spacing: 0;\n  background: var(--em-table-background-color-default-header, #fff);\n  box-sizing: content-box;\n\n  tbody tr:last-of-type th,\n  tbody tr:last-of-type td {\n    border-bottom: unset;\n  }\n\n  thead th:last-of-type,\n  tbody td:last-of-type {\n    border-right: unset;\n  }\n\n  thead th:first-of-type,\n  tbody th:first-of-type {\n    position: sticky;\n    left: 0;\n    z-index: 1;\n  }\n\n  /* header */\n  thead {\n    position: sticky;\n    top: 0;\n    z-index: 2;\n  }\n}\n\n.f_NI4ZykzRg557D1yLa_ {\n  box-sizing: border-box;\n  cursor: pointer;\n  height: var(--em-table-size-cell-height_R, 2.5rem);\n  max-height: var(--em-table-size-cell-height_R, 2.5rem);\n  padding: var(--em-table-padding-medium_R, 0.5rem);\n  border-bottom: var(--em-table-border-width-default, 1px) solid\n    var(--em-table-border-color-default, #ededf1);\n  border-right: var(--em-table-border-width-default, 1px) solid\n    var(--em-table-border-color-default, #ededf1);\n  background: var(--em-table-background-color-default-header, #fff);\n\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-family: var(--em-table-font-family, Inter, sans-serif);\n  font-size: var(--em-table-font-size, 0.75rem);\n  font-weight: var(--em-table-font-font-weight-regular, 400);\n  font-style: normal;\n  line-height: var(--em-table-font-line-height, 0.875rem);\n  text-align: center;\n}\n\n.f_NI4ZykzRg557D1yLa_.ygaVqXZo1gzJUHwWlBbn {\n  color: var(--em-table-text-default, #212129);\n  font-weight: var(--em-table-font-font-weight-medium, 500);\n}\n","",{version:3,sources:["webpack://./src/remarkable-ui/charts/tables/HeatMap/HeatMap.module.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,YAAY;AACd;;AAEA;EACE,iEAAiE;EACjE,kBAAkB;;EAElB,eAAe;EACf,mBAAmB;EACnB,gBAAgB;;EAEhB;iDAC+C;EAC/C,6DAA6D;EAC7D,gBAAgB;EAChB,gBAAgB;EAChB,kBAAkB;EAClB,sBAAsB;;EAEtB;IACE,WAAW;;IAEX;MACE,WAAW;IACb;EACF;AACF;;AAEA;EACE,iBAAiB;EACjB,iEAAiE;EACjE,uBAAuB;;EAEvB;;IAEE,oBAAoB;EACtB;;EAEA;;IAEE,mBAAmB;EACrB;;EAEA;;IAEE,gBAAgB;IAChB,OAAO;IACP,UAAU;EACZ;;EAEA,WAAW;EACX;IACE,gBAAgB;IAChB,MAAM;IACN,UAAU;EACZ;AACF;;AAEA;EACE,sBAAsB;EACtB,eAAe;EACf,kDAAkD;EAClD,sDAAsD;EACtD,iDAAiD;EACjD;iDAC+C;EAC/C;iDAC+C;EAC/C,iEAAiE;;EAEjE,gBAAgB;EAChB,uBAAuB;EACvB,mBAAmB;EACnB,2DAA2D;EAC3D,6CAA6C;EAC7C,0DAA0D;EAC1D,kBAAkB;EAClB,uDAAuD;EACvD,kBAAkB;AACpB;;AAEA;EACE,4CAA4C;EAC5C,yDAAyD;AAC3D",sourcesContent:[".heatMapContainer {\n  width: 100%;\n  height: 100%;\n}\n\n.tableContainer {\n  background: var(--em-table-background-color-default-header, #fff);\n  width: fit-content;\n\n  max-width: 100%;\n  height: fit-content;\n  max-height: 100%;\n\n  border: var(--em-table-border-width-default, 1px) solid\n    var(--em-table-border-color-default, #ededf1);\n  border-radius: var(--em-table-border-radius-default, 0.75rem);\n  overflow-x: auto;\n  overflow-y: auto;\n  position: relative;\n  box-sizing: border-box;\n\n  &.fullWidth {\n    width: 100%;\n\n    .table {\n      width: 100%;\n    }\n  }\n}\n\n.table {\n  border-spacing: 0;\n  background: var(--em-table-background-color-default-header, #fff);\n  box-sizing: content-box;\n\n  tbody tr:last-of-type th,\n  tbody tr:last-of-type td {\n    border-bottom: unset;\n  }\n\n  thead th:last-of-type,\n  tbody td:last-of-type {\n    border-right: unset;\n  }\n\n  thead th:first-of-type,\n  tbody th:first-of-type {\n    position: sticky;\n    left: 0;\n    z-index: 1;\n  }\n\n  /* header */\n  thead {\n    position: sticky;\n    top: 0;\n    z-index: 2;\n  }\n}\n\n.heatMapCell {\n  box-sizing: border-box;\n  cursor: pointer;\n  height: var(--em-table-size-cell-height_R, 2.5rem);\n  max-height: var(--em-table-size-cell-height_R, 2.5rem);\n  padding: var(--em-table-padding-medium_R, 0.5rem);\n  border-bottom: var(--em-table-border-width-default, 1px) solid\n    var(--em-table-border-color-default, #ededf1);\n  border-right: var(--em-table-border-width-default, 1px) solid\n    var(--em-table-border-color-default, #ededf1);\n  background: var(--em-table-background-color-default-header, #fff);\n\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-family: var(--em-table-font-family, Inter, sans-serif);\n  font-size: var(--em-table-font-size, 0.75rem);\n  font-weight: var(--em-table-font-font-weight-regular, 400);\n  font-style: normal;\n  line-height: var(--em-table-font-line-height, 0.875rem);\n  text-align: center;\n}\n\n.heatMapCell.header {\n  color: var(--em-table-text-default, #212129);\n  font-weight: var(--em-table-font-font-weight-medium, 500);\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={heatMapContainer:"WDdK6TNJAIz1aSQThgXB",tableContainer:"dUTpN_rou4ymw_Q8O3jC",fullWidth:"R4wY06Uwx1nEzEfOsaNu",table:"f3SJtNu26eoSCxXcZBrq",heatMapCell:"f_NI4ZykzRg557D1yLa_",header:"ygaVqXZo1gzJUHwWlBbn"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/remarkable-ui/charts/tables/HeatMap/HeatMap.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>HeatMap});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),HeatMap_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[4].use[1]!./src/remarkable-ui/charts/tables/HeatMap/HeatMap.module.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(HeatMap_module.A,options);const HeatMap_HeatMap_module=HeatMap_module.A&&HeatMap_module.A.locals?HeatMap_module.A.locals:void 0;var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs");const clamp01=x=>x<0?0:x>1?1:x,easeOutQuad=x=>1-(1-x)*(1-x),lerp=(a,b,t)=>a+(b-a)*t,idOf=v=>String(v??""),CSS_RGB_REGEX=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/i,COLOR_CACHE=new Map,normalizeHex=hex=>{if(!hex||"#"!==hex[0])return hex;const v=hex.slice(1).toLowerCase();return 3===v.length?`#${v[0]}${v[0]}${v[1]}${v[1]}${v[2]}${v[2]}`:6===v.length?`#${v}`:hex.toLowerCase()},hexToRgb=color=>{const hex=normalizeHex((input=>{if(!input)return input;const cached=COLOR_CACHE.get(input);if(cached)return cached;if(input.startsWith("#")){const hex=normalizeHex(input);return COLOR_CACHE.set(input,hex),hex}if("undefined"==typeof document)return input;const el=document.createElement("span");el.style.color=input,document.body.appendChild(el);const computed=getComputedStyle(el).color||"";el.remove();const m=computed.match(CSS_RGB_REGEX);if(!m)return input;const[,r="0",g="0",b="0"]=m,toHex=n=>Number(n).toString(16).padStart(2,"0"),hex=`#${toHex(r)}${toHex(g)}${toHex(b)}`.toLowerCase();return COLOR_CACHE.set(input,hex),hex})(color)).slice(1);if(6!==hex.length)return{r:0,g:0,b:0};const i=parseInt(hex,16);return{r:i>>16&255,g:i>>8&255,b:255&i}},lerpColor=(a,b,t)=>{const A=hexToRgb(a),B=hexToRgb(b);return((r,g,b)=>{const to=x=>Math.round(x).toString(16).padStart(2,"0");return`#${to(r)}${to(g)}${to(b)}`})(lerp(A.r,B.r,t),lerp(A.g,B.g,t),lerp(A.b,B.b,t))},getCellColor=backgroundColor=>(color=>{const{r,g,b}=hexToRgb(color);return(299*r+587*g+114*b)/1e3})(backgroundColor)<150?"#FFFFFF":"#212129",thresholdToRaw=(t,rawMin,rawMax,fallback)=>{if(null==t)return fallback;if("number"==typeof t&&Number.isFinite(t))return t;const asPct="string"==typeof t?(s=>{const t=s.trim();if(!t.endsWith("%"))return null;const n=Number.parseFloat(t.slice(0,-1));return Number.isFinite(n)?clamp01(n/100):null})(t):null;if(null!=asPct)return rawMin+asPct*(rawMax-rawMin);const maybe=Number(t);return Number.isFinite(maybe)?maybe:fallback},getCellValue=(value,displayNullAs)=>{const fallback=displayNullAs&&Number.isFinite(Number(displayNullAs))?Number(displayNullAs):displayNullAs;return(v=>{if(null==v)return v;const n=Number(v);return Number.isFinite(n)?n:v})(value??fallback)},getCellDisplayValue=(value,showValues,measure)=>showValues?"string"==typeof value||null==value||Number.isNaN(value)?value:measure?.format?measure.format(Number(value)):value:null,createColorForValue=({domainMin,domainMax,rawMin,rawMax,minColor,midColor,maxColor})=>{const midPoint=((domainMin,domainMax)=>{const range=domainMax-domainMin;return 0===range?.5:((domainMin+domainMax)/2-domainMin)/range})(domainMin,domainMax),scale=((minC,midC,maxC,midpoint=.5)=>{const m=clamp01(midpoint);return t=>{const x=clamp01(t);return x<=m?lerpColor(minC,midC,0===m?1:x/m):lerpColor(midC,maxC,(x-m)/(1-m))}})(minColor,midColor,maxColor,midPoint),leftTailLen=Math.max(1e-6,domainMin-rawMin),rightTailLen=Math.max(1e-6,rawMax-domainMax),domRange=domainMax-domainMin;if(0===domRange){const mid=scale(.5);return _v=>mid}return v=>{if(!Number.isFinite(v))return scale(.5);const t=(v-domainMin)/domRange;if(t<=0){const dist=Math.max(0,domainMin-v)/leftTailLen,strength=.35*easeOutQuad(clamp01(dist));return strength>0?lerpColor(minColor,"#FFFFFF",strength):minColor}if(t>=1){const dist=Math.max(0,v-domainMax)/rightTailLen,strength=.35*easeOutQuad(clamp01(dist));return strength>0?lerpColor(maxColor,"#000000",strength):maxColor}return scale(t)}};var tables_utils=__webpack_require__("./src/remarkable-ui/charts/tables/tables.utils.ts");const HeatMap=({data,showValues=!1,className,columnDimension,rowDimension,measure,minThreshold,maxThreshold,minColor,midColor,maxColor,columnWidth,firstColumnWidth,displayNullAs})=>{const{rawMin,rawMax}=(0,react.useMemo)(()=>{let min=1/0,max=-1/0;for(const d of data){const value=getCellValue(d[measure.key],displayNullAs);null!=value&&"number"==typeof value&&Number.isFinite(value)&&(value<min&&(min=value),value>max&&(max=value))}return Number.isFinite(min)&&Number.isFinite(max)?{rawMin:min,rawMax:max}:{rawMin:0,rawMax:0}},[data,measure.key,displayNullAs]),{domainMin,domainMax}=(0,react.useMemo)(()=>{const domMin=thresholdToRaw(minThreshold,rawMin,rawMax,rawMin),domMax=thresholdToRaw(maxThreshold,rawMin,rawMax,rawMax);return domMin<=domMax?{domainMin:domMin,domainMax:domMax}:{domainMin:domMax,domainMax:domMin}},[minThreshold,maxThreshold,rawMin,rawMax]),columnValues=(0,react.useMemo)(()=>Array.from(new Set(data.map(d=>d[columnDimension.key]).filter(v=>null!=v).map(idOf))),[data,columnDimension.key]),rowValues=(0,react.useMemo)(()=>Array.from(new Set(data.map(d=>d[rowDimension.key]).filter(v=>null!=v).map(idOf))),[data,rowDimension.key]),cellMap=(0,react.useMemo)(()=>{const map=new Map;for(const d of data){const r=idOf(d[rowDimension.key]),c=idOf(d[columnDimension.key]);map.has(r)||map.set(r,new Map),map.get(r).set(c,d)}return map},[data,rowDimension.key,columnDimension.key]),colorForValue=(0,react.useCallback)(v=>createColorForValue({domainMin,domainMax,rawMin,rawMax,minColor,midColor,maxColor})(v),[domainMin,domainMax,rawMin,rawMax,minColor,midColor,maxColor]);return(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)(HeatMap_HeatMap_module.heatMapContainer,className),children:(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)(HeatMap_HeatMap_module.tableContainer,(!columnWidth||!firstColumnWidth)&&HeatMap_HeatMap_module.fullWidth),children:(0,jsx_runtime.jsxs)("table",{className:HeatMap_HeatMap_module.table,"aria-label":"Heat map",children:[(0,jsx_runtime.jsx)("thead",{children:(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("th",{className:(0,clsx.A)(HeatMap_HeatMap_module.heatMapCell,HeatMap_HeatMap_module.header),style:(0,tables_utils.I)(firstColumnWidth),children:measure.label}),columnValues.map((cv,index)=>(0,jsx_runtime.jsx)("th",{className:(0,clsx.A)(HeatMap_HeatMap_module.heatMapCell,HeatMap_HeatMap_module.header),style:(0,tables_utils.I)(columnWidth),children:columnDimension.format?columnDimension.format(cv):cv},`col-${cv}-${index}`))]})}),(0,jsx_runtime.jsx)("tbody",{children:rowValues.map(rv=>(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("th",{className:(0,clsx.A)(HeatMap_HeatMap_module.heatMapCell,HeatMap_HeatMap_module.header),scope:"row",style:(0,tables_utils.I)(firstColumnWidth),children:rowDimension.format?rowDimension.format(rv):rv}),columnValues.map(cv=>{const obj=cellMap.get(rv)?.get(cv),value=getCellValue(obj?.[measure.key],displayNullAs),background=((value,colorForValue)=>"number"==typeof value&&Number.isFinite(value)?colorForValue(value):"white")(value,colorForValue),color=getCellColor(background);return(0,jsx_runtime.jsx)("td",{className:(0,clsx.A)(HeatMap_HeatMap_module.heatMapCell),style:{background,color,...(0,tables_utils.I)(columnWidth)},children:getCellDisplayValue(value,showValues,measure)},`cell-${rv}-${cv}`)})]},`row-${rv}`))})]})})})};HeatMap.__docgenInfo={description:"",methods:[],displayName:"HeatMap",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:""},measure:{required:!0,tsType:{name:"signature",type:"object",raw:"{\n  key: Extract<keyof T, string>;\n  label: string;\n  format?: (value: number) => string;\n}",signature:{properties:[{key:"key",value:{name:"Extract",elements:[{name:"T"},{name:"string"}],raw:"Extract<keyof T, string>",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"format",value:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}},required:!1}}]}},description:""},rowDimension:{required:!0,tsType:{name:"signature",type:"object",raw:"{\n  key: Extract<keyof T, string>;\n  label: string;\n  format?: (value: string) => string;\n}",signature:{properties:[{key:"key",value:{name:"Extract",elements:[{name:"T"},{name:"string"}],raw:"Extract<keyof T, string>",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"format",value:{name:"signature",type:"function",raw:"(value: string) => string",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"string"}},required:!1}}]}},description:""},columnDimension:{required:!0,tsType:{name:"signature",type:"object",raw:"{\n  key: Extract<keyof T, string>;\n  label: string;\n  format?: (value: string) => string;\n}",signature:{properties:[{key:"key",value:{name:"Extract",elements:[{name:"T"},{name:"string"}],raw:"Extract<keyof T, string>",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"format",value:{name:"signature",type:"function",raw:"(value: string) => string",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"string"}},required:!1}}]}},description:""},showValues:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},displayNullAs:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},minThreshold:{required:!1,tsType:{name:"union",raw:"string | number | `${number}%` | undefined",elements:[{name:"string"},{name:"number"},{name:"literal",value:"`${number}%`"},{name:"undefined"}]},description:'Color thresholds â€” number = raw value, "NN%" = percentage of [min..max].'},maxThreshold:{required:!1,tsType:{name:"union",raw:"string | number | `${number}%` | undefined",elements:[{name:"string"},{name:"number"},{name:"literal",value:"`${number}%`"},{name:"undefined"}]},description:""},minColor:{required:!0,tsType:{name:"string"},description:""},midColor:{required:!0,tsType:{name:"string"},description:""},maxColor:{required:!0,tsType:{name:"string"},description:""},columnWidth:{required:!1,tsType:{name:"number"},description:""},firstColumnWidth:{required:!1,tsType:{name:"number"},description:""},missingCellColor:{required:!1,tsType:{name:"string"},description:""}}}}}]);