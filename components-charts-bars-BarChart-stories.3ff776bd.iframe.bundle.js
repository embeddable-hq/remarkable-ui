"use strict";(self.webpackChunk_embeddable_com_remarkable_ui=self.webpackChunk_embeddable_com_remarkable_ui||[]).push([[626],{"./src/components/charts/bars/BarChart.stories.tsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Horizontal:()=>Horizontal,LogarithmicScale:()=>LogarithmicScale,Resize:()=>Resize,Stacked:()=>Stacked,__namedExportsOrder:()=>__namedExportsOrder,default:()=>BarChart_stories,widthRange:()=>widthRange});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-chartjs-2/dist/index.js"),chart=__webpack_require__("./node_modules/chart.js/dist/chart.js"),chartjs_utils=__webpack_require__("./src/components/charts/chartjs.utils.ts"),charts_constants=__webpack_require__("./src/components/charts/charts.constants.ts"),styles_utils=__webpack_require__("./src/styles/styles.utils.ts"),mergician_esm=__webpack_require__("./node_modules/mergician/dist/mergician.esm.js"),chartjs_cartesian_constants=__webpack_require__("./src/components/charts/chartjs.cartesian.constants.ts");const getBarChartData=data=>{const chartColors=(0,charts_constants.p)();return{...data,datasets:data.datasets?.map((dataset,index)=>{const colors=chartColors[index%chartColors.length],defaultDataset={...dataset,backgroundColor:colors,borderColor:colors};return(0,mergician_esm.i)(defaultDataset,dataset)})}},getDatalabelTotalFormatter=(_value,context)=>{const{datasets}=context.chart.data,i=context.dataIndex,total=datasets.reduce((sum,ds)=>sum+(ds.data[i]||0),0);return total>0?total:""},getBarVerticalChartOptions=config=>({indexAxis:"x",layout:{padding:{top:(config.stacked?config.showTotalLabels:config.showValueLabels)?chartjs_cartesian_constants.An:0}},plugins:{datalabels:{labels:{total:{align:context=>context.dataset.data[context.dataIndex]>=0?"top":"left"},value:{align:context=>{if(config.stacked)return"center";return context.dataset.data[context.dataIndex]>=0?"top":"bottom"}}}}},scales:{x:{grid:{display:!1},border:{display:!1},ticks:(0,chartjs_cartesian_constants.B1)(),reverse:config.reverseXAxis},y:{beginAtZero:!0,grid:{display:!0,color:chartjs_cartesian_constants.pl},border:{display:!1},ticks:(0,chartjs_cartesian_constants.HJ)(),min:config.yAxisRangeMin,max:config.yAxisRangeMax,type:config.showLogarithmicScale?"logarithmic":"linear"}}}),getBarHorizontalChartOptions=config=>({indexAxis:"y",layout:{padding:{right:(config.stacked?config.showTotalLabels:config.showValueLabels)?chartjs_cartesian_constants.An:0}},plugins:{datalabels:{labels:{total:{align:context=>context.dataset.data[context.dataIndex]>=0?"right":"left"},value:{align:context=>{if(config.stacked)return"center";return context.dataset.data[context.dataIndex]>=0?"right":"left"}}}}},scales:{x:{grid:{display:!0,color:chartjs_cartesian_constants.pl},border:{display:!1},ticks:(0,chartjs_cartesian_constants.HJ)(),min:config.xAxisRangeMin,max:config.xAxisRangeMax,type:config.showLogarithmicScale?"logarithmic":"linear"},y:{grid:{display:!1},border:{display:!1},ticks:(0,chartjs_cartesian_constants.B1)(),reverse:config.reverseYAxis}}});var charts_module=__webpack_require__("./src/components/charts/charts.module.css"),chartjs_plugin_datalabels_esm=__webpack_require__("./node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.esm.js");chart.t1.register(chart.PP,chart.kc,chart.E8,chart.OJ,chart.hE,chart.m_,chart.s$,chartjs_plugin_datalabels_esm.A);const BarChart=({data,onSegmentClick,options={},...props})=>{const chartRef=(0,react.useRef)(null),barChartOptions=(0,mergician_esm.i)((options=>{const baseBarChartOptions={elements:{bar:{borderRadius:(0,styles_utils.F)("--em-barchart-border-radius","0.375rem")}},plugins:{legend:{display:options.showLegend},tooltip:{enabled:options.showTooltips},datalabels:{display:context=>!(!options.showValueLabels||0===context.dataset.data[context.dataIndex])&&"auto",labels:{total:{display:context=>((context,showTotalLabels)=>!(!showTotalLabels||context.datasetIndex!==context.chart.data.datasets.length-1)&&"auto")(context,options.showTotalLabels),formatter:getDatalabelTotalFormatter,anchor:context=>context.dataset.data[context.dataIndex]>=0?"end":"start"},value:{anchor:context=>options.stacked?"center":context.dataset.data[context.dataIndex]>=0?"end":"start"}}}},scales:{x:{stacked:Boolean(options.stacked),title:{display:Boolean(options.xAxisLabel),text:options.xAxisLabel??""},ticks:{display:!0}},y:{stacked:Boolean(options.stacked),title:{display:Boolean(options.yAxisLabel),text:options.yAxisLabel??""},ticks:{display:!0}}}},verticalHorizontalOptions=(options.horizontal?getBarHorizontalChartOptions:getBarVerticalChartOptions)(options);return(0,mergician_esm.i)((0,chartjs_cartesian_constants.Xs)(),baseBarChartOptions,verticalHorizontalOptions)})(props),options);return(0,jsx_runtime.jsx)("div",{className:charts_module.A.chartContainer,children:(0,jsx_runtime.jsx)(dist.yP,{ref:chartRef,data:getBarChartData(data),options:barChartOptions,onClick:event=>{const indexClicked=(0,chartjs_utils.x)(event,chartRef);onSegmentClick?.(indexClicked)}})})};BarChart.__docgenInfo={description:"",methods:[],displayName:"BarChart",props:{data:{required:!0,tsType:{name:"ChartData",elements:[{name:"literal",value:"'bar'"}],raw:"ChartData<'bar'>"},description:""},options:{required:!1,tsType:{name:"Partial",elements:[{name:"ChartOptions",elements:[{name:"literal",value:"'bar'"}],raw:"ChartOptions<'bar'>"}],raw:"Partial<ChartOptions<'bar'>>"},description:"",defaultValue:{value:"{}",computed:!1}},onSegmentClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(index: number | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},name:"index"}],return:{name:"void"}}},description:""}}};var storybook_constants=__webpack_require__("./src/storybook.constants.tsx");const BarChart_stories={title:"Charts/BarChart",component:BarChart,args:{data:{labels:["January","February","March","April","May","June","July"],datasets:[{label:"Sales",data:[100,50,50,20,80,60,70]},{label:"Active Users",data:[20,30,50,90,60,30,60]}]},showValueLabels:!0,showLegend:!0,showTooltips:!0,horizontal:!1,showLogarithmicScale:!1,xAxisLabel:"Months",yAxisLabel:"Count",reverseXAxis:!1,reverseYAxis:!1,stacked:!1},argTypes:{yAxisRangeMin:{control:{type:"number"}},yAxisRangeMax:{control:{type:"number"}}}},Default={decorators:storybook_constants.uk},Stacked={args:{stacked:!0},decorators:storybook_constants.uk},LogarithmicScale={args:{showLogarithmicScale:!0},decorators:storybook_constants.uk},widthRange={args:{yAxisRangeMin:10,yAxisRangeMax:70},decorators:storybook_constants.uk},Horizontal={args:{horizontal:!0},decorators:storybook_constants.uk},Resize={decorators:storybook_constants.TL},__namedExportsOrder=["Default","Stacked","LogarithmicScale","widthRange","Horizontal","Resize"]},"./src/components/charts/chartjs.cartesian.constants.ts"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{An:()=>chartjsAxisOptionsLayoutPadding,B1:()=>getChartjsAxisOptionsScalesTicksDefault,HJ:()=>getChartjsAxisOptionsScalesTicksMuted,Xs:()=>getChartjsAxisOptions,pl:()=>getChartjsAxisOptionsScalesGridColor});var _styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/styles/styles.utils.ts"),mergician__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/mergician/dist/mergician.esm.js"),_chartjs_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/charts/chartjs.constants.ts");const getChartjsAxisOptionsScalesTicksDefault=()=>({display:!0,color:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.g)("--em-chart-grid-label-color","#212129"),font:{size:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.F)("--em-chart-grid-label-font-size","0.75rem"),family:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.g)("--em-chart-grid-font-family","sans-serif"),weight:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.F)("--em-chart-grid-label-font-weight","400")}}),getChartjsAxisOptionsScalesTicksMuted=()=>({display:!0,color:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.g)("--em-chart-grid-label-color--muted","#5C5C66"),font:{size:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.F)("--em-chart-grid-label-font-size","0.75rem"),family:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.g)("--em-chart-grid-font-family","sans-serif"),weight:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.F)("--em-chart-grid-label-font-weight","400")}}),getChartjsAxisOptionsScalesTitle=()=>({color:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.g)("--em-chart-grid-label-color","#212129"),font:{size:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.F)("--em-chart-grid-title-font-size","0.875rem"),weight:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.F)("--em-chart-grid-title-font-weight","700"),family:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.g)("--em-chart-grid-font-family","sans-serif")}}),getChartjsAxisOptionsScalesGrid=()=>({color:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.g)("--em-chart-grid-line-color--light","#EDEDF1"),lineWidth:(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.F)("--em-chart-grid-line-width--thin","0.0625rem")}),getChartjsAxisOptions=()=>(0,mergician__WEBPACK_IMPORTED_MODULE_1__.i)((0,_chartjs_constants__WEBPACK_IMPORTED_MODULE_2__.a8)(),{plugins:{datalabels:{labels:{total:{anchor:context=>context.dataset.data[context.dataIndex]>=0?"end":"start",align:context=>context.dataset.data[context.dataIndex]>=0?"top":"bottom"},value:{anchor:context=>context.dataset.data[context.dataIndex]>=0?"end":"start",align:context=>context.dataset.data[context.dataIndex]>=0?"top":"bottom"}}}},scales:{x:{grid:getChartjsAxisOptionsScalesGrid(),title:getChartjsAxisOptionsScalesTitle(),ticks:getChartjsAxisOptionsScalesTicksDefault()},y:{grid:getChartjsAxisOptionsScalesGrid(),title:getChartjsAxisOptionsScalesTitle(),ticks:getChartjsAxisOptionsScalesTicksMuted()}}}),chartjsAxisOptionsLayoutPadding=30;const getChartjsAxisOptionsScalesGridColor=ctx=>{if(0===ctx.tick.value){if(0===ctx.chart.data.datasets.length)return;return function isMixedValues(values){const hasPos=values.some(v=>v>0),hasNeg=values.some(v=>v<0);return hasPos&&hasNeg}(ctx.chart.data.datasets[0].data)?(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.g)("--em-chart-grid-line-color","#212129"):(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.g)("--em-chart-grid-line-color--subtle","#B8B8BD")}return(0,_styles_styles_utils__WEBPACK_IMPORTED_MODULE_0__.g)("--em-chart-grid-line-color--light","#EDEDF1")}}}]);